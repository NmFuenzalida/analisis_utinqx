<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ambas UTIs - Categorización CUDYR 2024-2025</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f2f5;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* NAV */
        .nav-bar {
            background: #1a252f;
            padding: 0;
            display: flex;
            gap: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            flex-wrap: wrap;
            box-shadow: 0 2px 12px rgba(0,0,0,0.3);
        }
        .nav-bar a {
            color: #bdc3c7;
            text-decoration: none;
            padding: 14px 20px;
            font-size: 13px;
            font-weight: 500;
            transition: all .25s;
            border-bottom: 3px solid transparent;
        }
        .nav-bar a:hover { background: #2c3e50; color: #fff; }
        .nav-bar a.active { color: #fff; background: transparent; border-bottom: 3px solid #e67e22; font-weight: 700; }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 50%, #34495e 100%);
            color: white;
            padding: 50px 20px 45px;
            text-align: center;
            position: relative;
        }
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2980b9, #e67e22);
        }
        .header h1 { font-size: 2.2em; margin-bottom: 8px; font-weight: 300; }
        .header h1 strong { font-weight: 700; }
        .header p { font-size: 1em; opacity: 0.7; letter-spacing: 0.5px; }

        .container { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 30px; }

        /* CARDS */
        .card {
            background: white;
            border-radius: 14px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            transition: transform .3s, box-shadow .3s;
            border: 1px solid rgba(0,0,0,0.04);
            opacity: 0;
            transform: translateY(30px);
        }
        .card.visible { opacity: 1; transform: translateY(0); }
        .card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0,0,0,0.12); }
        .card h3 {
            color: #95a5a6;
            margin-bottom: 10px;
            font-size: 0.78em;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        .card .valor {
            font-size: 2.5em;
            font-weight: 700;
            color: #2c3e50;
            line-height: 1.1;
        }
        .card .valor.rojo { color: #c0392b; }
        .card .cambio {
            font-size: 0.88em;
            margin-top: 10px;
            padding: 5px 12px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
        }
        .card .cambio.sube { background: #fce4e4; color: #c0392b; }
        .card .cambio.baja { background: #d5f5d5; color: #27ae60; }
        .card .detalle { color: #95a5a6; font-size: 0.86em; margin-top: 10px; line-height: 1.5; }
        .card .unidad-label {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.72em;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        .label-nqx { background: #e8f4fd; color: #2980b9; }
        .label-qx { background: #fdebd0; color: #e67e22; }

        /* SECCIONES */
        .seccion { margin-bottom: 35px; }
        .seccion h2 {
            color: #2c3e50;
            margin-bottom: 18px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e67e22;
            font-size: 1.3em;
            font-weight: 600;
            display: inline-block;
        }

        /* TABLAS */
        .tabla-container {
            background: white;
            border-radius: 14px;
            padding: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }
        .tabla-container.visible { opacity: 1; transform: translateY(0); }
        table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
        th { background: #2c3e50; color: white; padding: 12px 14px; text-align: center; font-weight: 600; font-size: 0.83em; letter-spacing: 0.3px; }
        th.nqx { background: #2471a3; }
        th.qx { background: #ca6f1e; }
        td { padding: 10px 14px; text-align: center; border-bottom: 1px solid #f0f0f0; transition: background .15s; }
        tr:hover td { background: #f8f9fa; }
        tfoot td { background: #f8f9fa; font-weight: 700; }

        .nota {
            background: #fef9e7;
            border-left: 4px solid #f39c12;
            padding: 18px 22px;
            border-radius: 0 12px 12px 0;
            margin-top: 25px;
            font-size: 0.88em;
            color: #7d6608;
            line-height: 1.5;
        }
        .footer {
            text-align: center;
            padding: 30px;
            color: #bdc3c7;
            font-size: 0.82em;
        }

        .card, .tabla-container { transition: opacity .6s ease, transform .6s ease, box-shadow .3s; }

        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
            .grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.5em; }
        }
        @media print {
            .nav-bar { display: none; }
            body { background: #fff; }
            .card, .tabla-container { box-shadow: none; border: 1px solid #ddd; opacity: 1; transform: none; }
        }
    </style>
</head>
<body>

<nav class="nav-bar">
    <a href="index.html">Resumen UTINQX</a>
    <a href="dashboard_utinqx.html">Categorización UTINQX</a>
    <a href="ambas_uti.html" class="active">Ambas UTI (Categorización)</a>
    <a href="../analisis_estadistica_uti/dashboard_comparativo_clinico.html">Comparativo Clínico</a>
    <a href="../analisis_estadistica_uti/reporte_justificacion_utinqx.html">Justificación UTINQX</a>
</nav>

    <div class="header">
        <h1>Categorización CUDYR — <strong>Ambas UTIs</strong></h1>
        <p>Datos de categorización 2024-2025 | UTI Neuroquirúrgica y UTI Quirúrgica</p>
    </div>

    <div class="container">

        <div class="seccion">
            <h2>Volumen de Actividad por Unidad</h2>
            <div class="grid-2">
                <div class="card">
                    <span class="unidad-label label-nqx">UTINQX</span>
                    <h3>Total Categorizaciones</h3>
                    <div class="valor" data-count="1791">0</div>
                    <div class="cambio sube">+8.5% vs 2024 (1,651)</div>
                    <div class="detalle">365 pacientes únicos atendidos en 2025 (2024: 277)</div>
                </div>
                <div class="card">
                    <span class="unidad-label label-qx">UTIQX</span>
                    <h3>Total Categorizaciones</h3>
                    <div class="valor" data-count="2780">0</div>
                    <div class="cambio sube">+6.5% vs 2024 (2,610)</div>
                    <div class="detalle">604 pacientes únicos atendidos en 2025 (2024: 590)</div>
                </div>
            </div>
        </div>

        <div class="seccion">
            <h2>Perfil de Riesgo por Unidad (2025)</h2>
            <div class="grid">
                <div class="card">
                    <span class="unidad-label label-nqx">UTINQX</span>
                    <h3>% Alto Riesgo (A+B)</h3>
                    <div class="valor rojo" data-count="97.6" data-decimals="1" data-suffix="%">0</div>
                    <div class="detalle">1,748 categorizaciones A+B de 1,791 totales</div>
                </div>
                <div class="card">
                    <span class="unidad-label label-qx">UTIQX</span>
                    <h3>% Alto Riesgo (A+B)</h3>
                    <div class="valor rojo" data-count="99.5" data-decimals="1" data-suffix="%">0</div>
                    <div class="detalle">2,767 categorizaciones A+B de 2,780 totales</div>
                </div>
                <div class="card">
                    <span class="unidad-label label-nqx">UTINQX</span>
                    <h3>Categorizaciones A1</h3>
                    <div class="valor rojo" data-count="286">0</div>
                    <div class="detalle">Máximo riesgo + dependencia total (2024: 273)</div>
                </div>
                <div class="card">
                    <span class="unidad-label label-qx">UTIQX</span>
                    <h3>Categorizaciones A1</h3>
                    <div class="valor rojo" data-count="668">0</div>
                    <div class="detalle">Máximo riesgo + dependencia total (2024: 389)</div>
                </div>
            </div>
        </div>

        <div class="seccion">
            <h2>Categorizaciones por Paciente</h2>
            <div class="grid-2">
                <div class="card">
                    <span class="unidad-label label-nqx">UTINQX</span>
                    <h3>Promedio cat. por paciente</h3>
                    <div class="valor" data-count="4.9" data-decimals="1">0</div>
                    <div class="detalle">Equivale aprox. a días de internación promedio. En 2024 fue 6.0.</div>
                </div>
                <div class="card">
                    <span class="unidad-label label-qx">UTIQX</span>
                    <h3>Promedio cat. por paciente</h3>
                    <div class="valor" data-count="4.6" data-decimals="1">0</div>
                    <div class="detalle">Equivale aprox. a días de internación promedio. En 2024 fue 4.4.</div>
                </div>
            </div>
        </div>

        <div class="seccion">
            <h2>Detalle Mensual 2024-2025</h2>
            <div class="tabla-container">
                <table>
                    <thead>
                        <tr>
                            <th rowspan="2">Mes</th>
                            <th class="nqx" colspan="2">UTINQX</th>
                            <th class="qx" colspan="2">UTIQX</th>
                            <th class="nqx">% A+B UTINQX</th>
                            <th class="qx">% A+B UTIQX</th>
                        </tr>
                        <tr>
                            <th class="nqx">2024</th>
                            <th class="nqx">2025</th>
                            <th class="qx">2024</th>
                            <th class="qx">2025</th>
                            <th class="nqx">2025</th>
                            <th class="qx">2025</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><strong>Ene</strong></td><td>165</td><td>110</td><td>130</td><td>231</td><td>95.5%</td><td>99.6%</td></tr>
                        <tr><td><strong>Feb</strong></td><td>118</td><td>96</td><td>205</td><td>189</td><td>95.8%</td><td>99.5%</td></tr>
                        <tr><td><strong>Mar</strong></td><td>134</td><td>132</td><td>215</td><td>224</td><td>92.4%</td><td>99.1%</td></tr>
                        <tr><td><strong>Abr</strong></td><td>93</td><td>157</td><td>213</td><td>225</td><td>93.0%</td><td>99.1%</td></tr>
                        <tr><td><strong>May</strong></td><td>127</td><td>168</td><td>220</td><td>248</td><td>98.2%</td><td>99.2%</td></tr>
                        <tr><td><strong>Jun</strong></td><td>131</td><td>164</td><td>211</td><td>239</td><td>98.8%</td><td>100.0%</td></tr>
                        <tr><td><strong>Jul</strong></td><td>142</td><td>168</td><td>214</td><td>235</td><td>98.2%</td><td>99.6%</td></tr>
                        <tr><td><strong>Ago</strong></td><td>159</td><td>153</td><td>227</td><td>226</td><td>100.0%</td><td>100.0%</td></tr>
                        <tr><td><strong>Sep</strong></td><td>162</td><td>161</td><td>246</td><td>244</td><td>100.0%</td><td>99.2%</td></tr>
                        <tr><td><strong>Oct</strong></td><td>159</td><td>160</td><td>255</td><td>241</td><td>97.5%</td><td>99.6%</td></tr>
                        <tr><td><strong>Nov</strong></td><td>156</td><td>166</td><td>234</td><td>241</td><td>99.4%</td><td>100.0%</td></tr>
                        <tr><td><strong>Dic</strong></td><td>105</td><td>156</td><td>240</td><td>237</td><td>100.0%</td><td>99.6%</td></tr>
                    </tbody>
                    <tfoot>
                        <tr><td>TOTAL</td><td>1651</td><td>1791</td><td>2610</td><td>2780</td><td>97.6%</td><td>99.5%</td></tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="seccion">
            <h2>Distribución de Categorías 2025</h2>
            <div class="tabla-container">
                <table>
                    <thead>
                        <tr>
                            <th rowspan="2">Categoría</th>
                            <th class="nqx" colspan="2">UTINQX</th>
                            <th class="qx" colspan="2">UTIQX</th>
                            <th rowspan="2">Riesgo</th>
                        </tr>
                        <tr>
                            <th class="nqx">Cantidad</th>
                            <th class="nqx">%</th>
                            <th class="qx">Cantidad</th>
                            <th class="qx">%</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><strong>A1</strong></td><td>286</td><td>16.0%</td><td>668</td><td>24.0%</td><td>Máximo</td></tr>
                        <tr><td><strong>A2</strong></td><td>2</td><td>0.1%</td><td>4</td><td>0.1%</td><td>Máximo</td></tr>
                        <tr><td><strong>B1</strong></td><td>1341</td><td>74.9%</td><td>1997</td><td>71.8%</td><td>Alto</td></tr>
                        <tr><td><strong>B2</strong></td><td>119</td><td>6.6%</td><td>96</td><td>3.5%</td><td>Alto</td></tr>
                        <tr><td><strong>B3</strong></td><td>0</td><td>0.0%</td><td>2</td><td>0.1%</td><td>Alto</td></tr>
                        <tr><td><strong>C1</strong></td><td>26</td><td>1.5%</td><td>8</td><td>0.3%</td><td>Mediano</td></tr>
                        <tr><td><strong>C2</strong></td><td>12</td><td>0.7%</td><td>5</td><td>0.2%</td><td>Mediano</td></tr>
                        <tr><td><strong>C3</strong></td><td>5</td><td>0.3%</td><td>0</td><td>0.0%</td><td>Mediano</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="nota">
            <strong>Fuente de datos:</strong> Sistema de categorización CUDYR de HIS.
            Todos los valores corresponden a conteos directos de las categorizaciones
            registradas en el sistema. No se incluyen estimaciones ni proyecciones.
            Cada unidad se presenta con sus propios datos para su lectura independiente.
        </div>

        <div class="footer">
            <p>UTI Neuroquirúrgica | Datos CUDYR 2024-2025 | Análisis Nicolás Morales F.</p>
        </div>
    </div>

<script>
const obs = new IntersectionObserver((entries) => {
    entries.forEach((e, i) => {
        if (e.isIntersecting) {
            setTimeout(() => e.target.classList.add('visible'), i * 80);
            obs.unobserve(e.target);
        }
    });
}, { threshold: 0.15 });
document.querySelectorAll('.card, .tabla-container').forEach(el => obs.observe(el));

const countObs = new IntersectionObserver((entries) => {
    entries.forEach(e => {
        if (!e.isIntersecting) return;
        const el = e.target;
        const target = parseFloat(el.dataset.count);
        const decimals = parseInt(el.dataset.decimals || '0');
        const suffix = el.dataset.suffix || '';
        const duration = 1200;
        const start = performance.now();
        const step = (now) => {
            const p = Math.min((now - start) / duration, 1);
            const ease = 1 - Math.pow(1 - p, 3);
            const val = target * ease;
            el.textContent = decimals > 0 ? val.toFixed(decimals) + suffix : Math.round(val).toLocaleString('es-CL') + suffix;
            if (p < 1) requestAnimationFrame(step);
        };
        requestAnimationFrame(step);
        countObs.unobserve(el);
    });
}, { threshold: 0.5 });
document.querySelectorAll('[data-count]').forEach(el => countObs.observe(el));
</script>
</body>
</html>
